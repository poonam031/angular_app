<div class="form-container">

  <!-- ================= HEADER ================= -->
  <div class="form-header">
    <h2>{{ lang.t('GRAIN_DEMAND') }}</h2>
    <button class="btn-close" (click)="onClose()">✕</button>
  </div>

  <!-- ================= CONTENT ================= -->
  <div class="form-content">

    <!-- ===== SECTION 1 : DEMAND INFORMATION ===== -->
  <div class="section-box">
  <h3 class="section-title">
    {{ lang.t('DEMAND_INFO') }}
  </h3>

  <div class="form-grid">

    <!-- GODOWN : CODE + NAME -->
    <div class="form-group inline-group">
      <label>{{ lang.t('GODOWN') }}</label>

      <div class="inline-fields">
        <select [(ngModel)]="form.godownCode"
                (ngModelChange)="onGodownChange($event)">
          <option *ngFor="let g of godowns" [value]="g.code">
            {{ g.code }}
          </option>
        </select>

        <input type="text"
               [value]="form.godownName"
               disabled>
      </div>
    </div>

    <!-- DEMAND NO : NO + YEAR -->
    <div class="form-group inline-group">
      <label>{{ lang.t('DEMAND_NO') }}</label>

      <div class="inline-fields">
        <select [(ngModel)]="form.demandNo">
          <option *ngFor="let d of demandNumbers" [value]="d">
            {{ d }}
          </option>
        </select>

        <input type="text"
               [value]="form.year"
               disabled>
      </div>
    </div>

    <!-- DATE -->
    <div class="form-group">
      <label>{{ lang.t('DATE') }}</label>
      <input type="date"
             [(ngModel)]="form.date">
    </div>

    <!-- MEMBER : CODE + NAME + CITY (FULL WIDTH) -->
    <div class="form-group inline-group full-width">
      <label>{{ lang.t('MEMBER_CODE') }}</label>

      <div class="inline-fields">
        <select [(ngModel)]="form.memberCode"
                (ngModelChange)="onMemberChange($event)">
          <option *ngFor="let m of members" [value]="m.code">
            {{ m.code }}
          </option>
        </select>

        <input type="text"
               [value]="form.memberName"
               disabled>

        <select [(ngModel)]="form.city">
          <option value="Kolhapur">कोल्हापूर</option>
          <option value="Sangli">सांगली</option>
          <option value="Satara">सातारा</option>
        </select>
      </div>
    </div>

  </div>
</div>


    <!-- ===== SECTION 2 : ITEM TABLE ===== -->
    <div class="section-box">
      <h3 class="section-title">
  {{ lang.t('GRAIN_DEMAND') }}
</h3>


      <div class="table-container">
        <table class="item-table">
          <thead>
            <tr>
              <th style="width:120px;">{{ lang.t('ITEM') }}</th>
              <th>{{ lang.t('ITEM_LIST_NAME') }}</th>
              <th style="width:120px; text-align:right;">
                {{ lang.t('NOS') }}
              </th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let item of items">
              <td>{{ item.code }}</td>
              <td>{{ item.name }}</td>
              <td>
                <input type="number"
                       [(ngModel)]="item.qty"
                       (ngModelChange)="calculateTotal()">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ===== SECTION 3 : TOTAL ===== -->
    <div class="total-bar">
      <label>{{ lang.t('TOTAL_NOS') }} :</label>
      <input class="total-input"
             [value]="totalQty"
             disabled>
    </div>

  </div>

  <!-- ================= FOOTER ================= -->
  <div class="form-footer">

    <!-- LEFT ACTIONS -->
    <div class="footer-left">
      <button class="btn-clear" (click)="onNew()">
        {{ lang.t('NEW') }}
      </button>

      <button class="btn-clear" (click)="onSave()">
        {{ lang.t('EDIT') }}
      </button>

      <button class="btn-clear" (click)="onDelete()">
        {{ lang.t('DELETE') }}
      </button>

      <button class="btn-clear" (click)="onPrint()">
        {{ lang.t('PRINT') }}
      </button>

      <button class="btn-clear" (click)="onClose()">
        {{ lang.t('CLOSE') }}
      </button>
    </div>

    <!-- RIGHT PAGINATION -->
    <div class="footer-right modern-pagination">
      <button class="page-btn" title="First">⏮</button>
      <button class="page-btn" title="Previous">◀</button>

      <span class="page-info">
        1 / {{ demandNumbers.length }}
      </span>

      <button class="page-btn" title="Next">▶</button>
      <button class="page-btn" title="Last">⏭</button>
    </div>

  </div>

</div>
